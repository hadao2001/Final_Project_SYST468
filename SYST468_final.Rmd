---
title: "SYST 468 Final Project"
author: "Ha Dao, Hary Nayer, Marwa Zubair"
date: "May 12th, 2022"
output: pdf_document
documentclass: article 
geometry: margin=1in
fontsize: 12pt
pagenumber: TRUE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Download library
```{r , echo=FALSE, message=FALSE}
library(readr)
library(ggplot2)
library(car)
library(dplyr)
library(ISLR)
library(MASS)
library(class)
```

## Download dataset
```{r , echo=FALSE, message=FALSE}
coupon_rec <- read_csv("/Users/hadao/Documents/Spring2022/SYST468/in-vehicle-coupon-recommendation.csv")
coupon_rec <- as.data.frame(coupon_rec)
dim(coupon_rec)
```

### Key Attribute Information:

- destination: Home, No Urgent Place, Work
- passanger: Alone Friend(s), Kid(s), Partner 
- weather: Sunny, Rainy, Snowy 
- temperature:55, 80, 30 
- time: 2PM, 10AM, 6PM, 7AM, 10PM 
- coupon: Bar, Carry out & Take away, Coffee House, Restaurant(<20), Restaurant(20-50)
- expiration: 1d, 2h (the coupon expires in 1 day or in 2 hours)
- gender: Female, Male 
- age: 21, 46, 26, 31, 41, 50plus, 36, below21 
- maritalStatus: Unmarried partner, Single, Married partner, Divorced, Widowed 
- has_Children:1, 0 
- education: Some college - no degree, Bachelors degree, Associates degree, High School Graduate, Graduate degree (Masters or Doctorate), Some High School 
- occupation:.......
- income: $37500 - $49999, $62500 - $74999, $12500 - $24999, $75000 - $87499, 
$50000 - $62499, $25000 - $37499, $100000 or More, $87500 - $99999, Less than $12500 
- Bar: never, less1, 1~3, gt8, nan4~8 (feature meaning: how many times do you go to a bar every month?)
- CoffeeHouse: never, less1, 4~8, 1~3, gt8, nan (feature meaning: how many times do you go to a coffeehouse every month?)__
- CarryAway:n4~8, 1~3, gt8, less1, never (feature meaning: how many times do you get take-away food every month?)
- RestaurantLessThan20: 4~8, 1~3, less1, gt8, never (feature meaning: how many times do you go to a restaurant with an average expense per person of less than $20 every month?)
- Restaurant20To50: 1~3, less1, never, gt8, 4~8, nan (feature meaning: how many times do you go to a restaurant with average expense per person of $20 - $50 every month?) 
- toCoupon_GEQ15min:0,1 (feature meaning: driving distance to the restaurant/bar for using the coupon is greater than 15 minutes) 
- toCoupon_GEQ25min:0, 1 (feature meaning: driving distance to the restaurant/bar for using the coupon is greater than 25 minutes) 
- direction_same:0, 1 (feature meaning: whether the restaurant/bar is in the same direction as your current destination) 
- direction_opp:1, 0 (feature meaning: whether the restaurant/bar is in the same direction as your current destination) 
- Y:1, 0 (whether the coupon is accepted)

## Data Preparation

### 1) Missing & unique value check
#### - Missing value: 
```{r , echo=FALSE, , message=FALSE}
cat("Columns with missing value\n")
sort(colSums(is.na(coupon_rec)), decreasing = TRUE)
cat("Missing value percentage\n")
sort(colMeans(is.na(coupon_rec))*100, decreasing = TRUE)
```

#### - Unique value:

#### 

__Coupon__
```{r , echo=FALSE, , message=FALSE}
cat("Percentage of whether the coupon is accepted")
coupon_rec %>%
  group_by(Y) %>%
  summarise(n = n()) %>%
  mutate(Freq = n/sum(n))

```

__Occupation__
```{r , echo=FALSE, , message=FALSE}
cat("Occupation")
df1 <- coupon_rec %>%
  group_by(occupation) %>%
  summarise(n = n()) %>%
  mutate(Freq = n/sum(n)) %>%
  arrange(desc(Freq))

as.data.frame(df1)
```


